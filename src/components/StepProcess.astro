---
export interface Step {
  number: string | number;
  title: string;
  description: string;
  icon?: string;
}

export interface Props {
  title?: string;
  subtitle?: string;
  steps: Step[];
  variant?: 'horizontal' | 'vertical';
}

const {
  title = 'How It Works',
  subtitle,
  steps,
  variant = 'horizontal',
} = Astro.props;
---

<section class="section-padding bg-white">
  <div class="container-wide">
    {title && (
      <div class="text-center max-w-2xl mx-auto mb-12">
        <h2 class="text-3xl md:text-4xl font-black text-[#1B2A4A] mb-4">{title}</h2>
        {subtitle && <p class="text-slate-600 text-lg">{subtitle}</p>}
      </div>
    )}

    <div class={`${variant === 'horizontal' ? 'grid grid-cols-1 md:grid-cols-3 gap-8 relative' : 'space-y-8 max-w-2xl mx-auto'}`}>
      
      {/* Connector line for horizontal */}
      {variant === 'horizontal' && steps.length > 1 && (
        <div class="hidden md:block absolute top-10 left-1/3 right-1/3 h-0.5 bg-gradient-to-r from-[#2D6B2D]/30 via-[#2D6B2D] to-[#2D6B2D]/30 z-0" aria-hidden="true"></div>
      )}

      {steps.map((step, index) => (
        <div class={`relative z-10 ${variant === 'horizontal' ? 'text-center flex flex-col items-center' : 'flex items-start gap-6'}`}>
          
          {/* Step number circle */}
          <div class={`flex-shrink-0 w-20 h-20 rounded-full bg-[#2D6B2D] flex items-center justify-center shadow-lg mb-4 ${variant === 'vertical' ? 'mb-0' : ''}`}>
            {step.icon ? (
              <span class="text-white text-2xl" set:html={step.icon} />
            ) : (
              <span class="text-3xl font-black text-white">{step.number}</span>
            )}
          </div>

          <div class={variant === 'vertical' ? 'flex-1 pt-3' : ''}>
            <h3 class="text-xl font-bold text-[#1B2A4A] mb-2">{step.title}</h3>
            <p class="text-slate-600 leading-relaxed">{step.description}</p>
          </div>
        </div>
      ))}
    </div>
  </div>
</section>
