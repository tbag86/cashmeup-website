---
export interface BreadcrumbItem {
  label: string;
  href?: string;
}

export interface Props {
  items: BreadcrumbItem[];
  variant?: 'light' | 'dark';
}

const { items, variant = 'light' } = Astro.props;

const schema = {
  '@context': 'https://schema.org',
  '@type': 'BreadcrumbList',
  itemListElement: [
    { '@type': 'ListItem', position: 1, name: 'Home', item: 'https://cashmeup.co.uk/' },
    ...items.map((item, index) => ({
      '@type': 'ListItem',
      position: index + 2,
      name: item.label,
      ...(item.href ? { item: `https://cashmeup.co.uk${item.href}` } : {}),
    })),
  ],
};

const isDark = variant === 'dark';
---

<nav
  aria-label="Breadcrumb"
  class={isDark
    ? 'py-3 border-b border-white/10'
    : 'py-3 border-b border-slate-100 bg-white'}
>
  <div class="container-wide">
    <ol class="flex items-center gap-1.5 text-sm" role="list">
      <li>
        <a
          href="/"
          class={isDark
            ? 'text-white/60 hover:text-white transition-colors'
            : 'text-slate-500 hover:text-[#1B2A4A] transition-colors'}
        >Home</a>
      </li>
      {items.map((item, index) => (
        <>
          <li aria-hidden="true">
            <svg
              class={isDark ? 'w-3 h-3 text-white/30' : 'w-3 h-3 text-slate-300'}
              fill="none" viewBox="0 0 24 24" stroke="currentColor"
            >
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
            </svg>
          </li>
          <li>
            {item.href && index < items.length - 1 ? (
              <a
                href={item.href}
                class={isDark
                  ? 'text-white/60 hover:text-white transition-colors'
                  : 'text-slate-500 hover:text-[#1B2A4A] transition-colors'}
              >{item.label}</a>
            ) : (
              <span
                class={isDark ? 'text-white font-medium' : 'text-[#1B2A4A] font-medium'}
                aria-current="page"
              >{item.label}</span>
            )}
          </li>
        </>
      ))}
    </ol>
  </div>
</nav>

<script type="application/ld+json" set:html={JSON.stringify(schema)} />
